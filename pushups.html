<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="mobile-web-app-capable" content="yes">
<title>Pushups Test</title>
<script src="stopwatch.js"></script>
<style>
  /* general 4-corner and center areas positioning */
  .area {
    position:absolute;
    margin:0;
    padding:5px;
  }
  .area:nth-child(1) {
      top:0;
      left:0;    
  }
  .area:nth-child(2) {
      bottom:0;
      left:0;
  }
  .area:nth-child(3) {
      top:0;
      right:0;
  }
  .area:nth-child(4) {
      bottom:0;
      right:0;
  }
  .area:nth-child(5) {
      top:50%;
      left:50%;
      transform: translate(-50%,-50%);
  }
  /* specific styles */
  body { font-family: Arial; }
  #mainUI {
      text-align: center;
  }
  #mainUI button {
      min-width: 5em;
      min-height: 5em;
  }
  #mainUI #todo {
      font-size: 2.5em;
  }
  #mainUI #stepTime {
      font-size: 10em;
      margin-top: -0.15em;
      margin-bottom: -0.1em;
  }
  input, select, button {
    font-family: inherit;
    font-size: inherit;
  }
  #workoutTitle {
      font-style: italic;
  }
</style>
</head>
<body>
  <div class="area">
    <div id="stepUI"></div>
  </div>
  <div class="area">
    Total<br/>
    <span id="curTotalTime"></span> seconds<br/>
    <span id="curTotalExercises"></span> / <span id="totalExercises"></span> pushups
  </div>
  <div class="area">
    <div>
      <button onmousedown="displaySetSet('pushups', curSetSetIndex)">Pushups</button>
      <button onmousedown="displaySetSet('situps', curSetSetIndex)">Situps</button>
    </div>
    <div>
      <button onmousedown="nextSetSet(-1)">Prev Day</button>
      <button onmousedown="nextSetSet(1)">Next Day</button>
    </div>
  </div>
  <div class="area">
    <div class="link"><a href="http://www.hundredpushups.com" target="_blank">pushups site</a></div>
    <div class="link" id="fork"><a href="https://github.com/kaicarver/sedfugit/">fork me on Github!</a></div>
  </div>
  <div class="area">
    <div id="mainUI">
      <button onmousedown="nextStep()">
	<div id="todo"></div>
	<div id="stepTime"></div>
      </button>
    </div>
  </div>
  <script>
    window.onload = function() {
      var myCurSetSetIndex;
      if (typeof(localStorage.myCurSetSetIndex) !== "undefined") {
	myCurSetSetIndex = Number(localStorage.myCurSetSetIndex);
      } else {
	myCurSetSetIndex = 0;
	localStorage.myCurSetSetIndex = curSetSetIndex;
      }
      displaySetSet('pushups', myCurSetSetIndex);
      //displaySetSet('situps', myCurSetSetIndex);
    }
    var curExercise;
    var exerciseSet;
    var curSetSetIndex;
    var curStep;
    var allData = {
      'pushups' : [
	{ "week" : 3, "day" : 1, "col" : 2, "sets" : [12,17,13,13,17], "rest" : 60 },
	{ "week" : 3, "day" : 2, "col" : 2, "sets" : [14,19,14,14,19], "rest" : 90 },
	{ "week" : 3, "day" : 3, "col" : 2, "sets" : [16,21,15,15,21], "rest" : 120 },
	{ "week" : 4, "day" : 1, "col" : 2, "sets" : [18,22,16,16,25], "rest" : 60 },
	{ "week" : 4, "day" : 2, "col" : 2, "sets" : [20,25,20,20,28], "rest" : 90 },
	{ "week" : 4, "day" : 3, "col" : 2, "sets" : [23,28,23,23,33], "rest" : 120 },
	{ "week" : 5, "day" : 1, "col" : 2, "sets" : [23,28,23,23,33], "rest" : 120 },
      ],
      'situps' : [
	{ "week" : 3, "day" : 1, "col" : 1, "sets" : [15,18,11,11,14], "rest" : 60 },
	{ "week" : 3, "day" : 2, "col" : 1, "sets" : [15,18,12,12,18], "rest" : 60 },
	{ "week" : 3, "day" : 3, "col" : 1, "sets" : [17,20,14,14,20], "rest" : 60 },
      ]
    };
    function displaySetSet(exercise, setSetIndex) {
      curExercise = exercise;
      var exerciseData = allData[exercise];
      for (var j = 0; j < exerciseData.length; j++) {
	var sets = exerciseData[j].sets;
	var rest = exerciseData[j].rest;
	var textSets = [];
	for (var i = 0; i < sets.length; i++) {
	  if (i > 0) textSets.push("rest " + rest + " seconds");
	  var extra = (i == sets.length - 1) ? "at least " : "";
	  textSets.push("do " + extra + sets[i] + " " + exercise);
	}
	exerciseData[j].textSets = textSets;
      }
      curSetSetIndex = setSetIndex;
      localStorage.myCurSetSetIndex = curSetSetIndex;
      exerciseSet = exerciseData[setSetIndex];
      var stepUI = document.getElementById("stepUI");
      stepUI.innerHTML = '<div id="workoutTitle"><a href="http://www.hundredpushups.com/week' + exerciseSet.week +
	'.html" target="_blank">week '+ exerciseSet.week + '</a>' +
	' day ' + exerciseSet.day + ' level ' + exerciseSet.col + '</div>';
      for (var i = 0; i < exerciseSet.textSets.length; i++) {
	stepUI.innerHTML += '<div id="step' + i + '">' + exerciseSet.textSets[i] + ' </div>';
      }
      for (var i = 0; i < exerciseSet.textSets.length; i++) {
	new Stopwatch(document.getElementById("step" + i));
      }
      curStep = -1;
    }
    function nextSetSet(increment) {
      var newSetIndex = curSetSetIndex + increment;
      var exerciseData = allData[curExercise];
      if (newSetIndex < 0) newSetIndex = 0;
      if (newSetIndex > exerciseData.length - 1) newSetIndex = exerciseData.length - 1;
      if (newSetIndex == curSetSetIndex) return;
      displaySetSet(curExercise, newSetIndex);
    }
    function nextStep() {
      var todo = document.getElementById("todo");
      if (curStep < exerciseSet.textSets.length) {
	if (curStep >= 0) {
	  document.getElementById("step" + curStep).stopwatch.stop();
	} else {
	  document.getElementById('workoutTitle').innerHTML = '<div>' + new Date() + '</div>' + document.getElementById('workoutTitle').innerHTML;
	}
	curStep++;
	if (curStep < exerciseSet.textSets.length) {
	  var s = document.getElementById("step" + curStep);
	  todo.innerText = s.innerText;
	  s.style.backgroundColor = "pink";
	  //new Stopwatch(s).start();
	  s.stopwatch.start();
	}
	if (curStep > exerciseSet.textSets.length - 1) {
	  todo.innerText = "";
	}
      }
    }
    function totalTime() {
      var curTotalTime = 0;
      var curTotalExercises = 0;
      var totalExercises = 0;
      for (var i = 0; i < exerciseSet.textSets.length; i++) {
	var prevStep = document.getElementById('step' + (i-1));
	var step = document.getElementById('step' + i);
	if (step && step.stopwatch) {
	  curTotalTime += step.stopwatch.time();
	  // only add exercises when step has been done
	  if (prevStep && prevStep.stopwatch.time() > 0 && !prevStep.stopwatch.running() ) {
	    curTotalExercises += 1 * prevStep.stopwatch.pushups();
	  }
	  totalExercises += 1 * step.stopwatch.pushups();
	}
      }
      if (curStep >= exerciseSet.textSets.length) {
	// last step was done
	if (step && step.stopwatch) {
	  curTotalExercises += 1 * step.stopwatch.pushups();
	}
      }
      document.getElementById("curTotalTime").innerText = curTotalTime;
      document.getElementById("curTotalExercises").innerText = curTotalExercises;
      document.getElementById("totalExercises").innerText = totalExercises;
    }
    function stepTime() {
      var stepTime = curStep <= 0 ? "Go" : "Done";
      var step = document.getElementById('step' + curStep);
      if (step && step.stopwatch) {
	stepTime = step.stopwatch.render();
      }
      document.getElementById("stepTime").innerHTML = stepTime;
    }
    setInterval(totalTime, 100);   
    setInterval(stepTime, 100);
</script>
</body>
</html>
<!--

Past exercises, to be stored at some point:

Wed Nov  4 18:02:37 CST 2015
week 3 day 1 level 2
do 12 pushups 24
rest 60 seconds 59
do 17 pushups 34
rest 60 seconds 59
do 13 pushups 30
rest 60 seconds 65
do 13 pushups 29
rest 60 seconds 63
do at least 17 pushups 53
Total
416 seconds
72 / 72 pushups
Note: should have been easy restarting at week 3. It was not super easy towards the end -- barely could do the last set, with a tiny bit of pausing. Still, it's nice to be able to do a full set without totally dying and failing to do it properly. Something to be said for maxxing ou only at the end, not already at the 3d or 4th set.

Sun Nov 8 11 am
week 3 day 2 level 2
do 14 pushups 25
rest 90 seconds 105
do 19 pushups 33
rest 90 seconds 89
do 14 pushups 25
rest 90 seconds 90
do 14 pushups 22
rest 90 seconds 101
do at least 19 pushups 43
Total
533 seconds
80 / 80 pushups +6
Note: did 25 in last set. First time in a long time I can do a full set without trouble. Yay!

Thu Nov 19 12:15:58 CST 2015
week 3 day 3 level 2
do 16 pushups 29
rest 120 seconds 121
do 21 pushups 35
rest 120 seconds 109
do 15 pushups 21
rest 120 seconds 148
do 15 pushups 30
rest 120 seconds 61
do at least 21 pushups 48
? seconds
88 / 88 pushups +9
Note: 30 in last set, pretty easy day

Sun Nov 22 11:44:59 CST 2015
week 4 day 1 level 2
do 18 pushups 32
rest 60 seconds 66
do 22 pushups 38
rest 60 seconds 69
do 16 pushups 24
rest 60 seconds 62
do 16 pushups 30
rest 60 seconds 64
do at least 25 pushups 78
Total
463 seconds
97 / 97 pushups
Note: last 25 were hard, took 3 or 4 mini-breaks

situps exhaustion test
Sun Nov 22 12:08:26 CST 2015
40 situps

Thu Dec 03 2015 13:13:42 GMT+0800 (China Standard Time)
week 4 day 2 level 2
do 20 pushups 27
rest 90 seconds 91
do 25 pushups 31
rest 90 seconds 112
do 20 pushups 26
rest 90 seconds 90
do 20 pushups 32
rest 90 seconds 327
do at least 28 pushups 50
Total
786 seconds
113 / 113 pushups
Note: last 28 were hard, even waiting 5 minutes instead of 1.5 minutes

Mon Dec 14 2015 14:22:45 GMT+0100 (Central Europe Standard Time)
week 4 day 3 level 2
do 23 pushups 37
rest 120 seconds 146
do 28 pushups 45
rest 120 seconds 136
do 23 pushups 36
rest 120 seconds 259
do 23 pushups 34
rest 120 seconds 234
do at least 33 pushups 73
Total
1000 seconds
130 / 130 pushups
Note: was distracted so last pauses were twice normal; still had a hard time with last set. (Ha, 1000 seconds? kinda long)

Mon Apr 11 2016 11:41:40 GMT+0800 (Taipei)
week 4 day 2 level 2
do 20 pushups 37
rest 90 seconds 91
do 25 pushups 45
rest 90 seconds 121
do 20 pushups 40
rest 90 seconds 230
do 20 pushups 47
rest 90 seconds 866
do at least 28 pushups 2
Total
1479 seconds
113 / 113 pushups
Note: started getting tired soon, big breaks to finish max 29. Need to make reminder bell reminder interval geometric or exponential

Wed Jun 01 2016 10:58:32 GMT+0800 (China Standard Time)
week 3 day 1 level 2
do 12 pushups 27
rest 60 seconds 62
do 17 pushups 35
rest 60 seconds 71
do 13 pushups 30
rest 60 seconds 62
do 13 pushups 30
rest 60 seconds 61
do at least 17 pushups 64
Total
442 seconds
72 / 72 pushups
Note: First time in a while, struggled to finish last set... Looks like I restarted at about the right week and level.

Tue Jul 26 2016 14:20:38 GMT+0200 (Paris, Madrid (heure d’été))
week 3 day 2 level 2
do 14 pushups 25
rest 90 seconds 111
do 19 pushups 29
rest 90 seconds 105
do 14 pushups 22
rest 90 seconds 97
do 14 pushups 22
rest 90 seconds 161
do at least 19 pushups 39
611 seconds
85 / 80 pushups
Note: did max 24. Pretty easy, did it while remotely attending a keyholder meeting, nice way to relieve tension.

Fri Aug 12 2016 13:22:57 GMT+0200 (CEST)
week 3 day 2 level 2
do 14 pushups 26
rest 90 seconds 144
do 19 pushups 27
rest 90 seconds 95
do 14 pushups 26
rest 90 seconds 94
do 14 pushups 26
rest 90 seconds 90
do at least 19 pushups 35
563 seconds
80 / 80 pushups
Note: max 20. Pretty easy

Wed Jul 19 2017 08:49:08 GMT+0800 (China Standard Time)
week 3 day 1 level 2
do 12 pushups 28
rest 60 seconds 71
do 17 pushups 34
rest 60 seconds 70
do 13 pushups 35
rest 60 seconds 75
do 13 pushups 52
rest 60 seconds 71
do at least 17 pushups 169
Note: started getting hard by set 2, 3 breaks for max 18

Sun Jul 23 2017 15:28:41 GMT+0800 (China Standard Time)
week 3 day 2 level 2
do 14 pushups 28
rest 90 seconds 126
do 19 pushups 2
rest 90 seconds 93
do 14 pushups 32
rest 90 seconds 121
do 14 pushups 19
rest 90 seconds 105
do at least 19 pushups 182
708 seconds
80 / 80 pushups
Note: could only do them one or 2 at a time in second half of last set

Fri Jul 28 2017 15:59:12 GMT+0800 (China Standard Time)
week 3 day 3 level 2
do 16 pushups 30
rest 120 seconds 140
do 21 pushups 36
rest 120 seconds 127
do 15 pushups 36
rest 120 seconds 127
do 15 pushups 41
rest 120 seconds 305
do at least 21 pushups 185
1027 seconds
88 / 88 pushups
Note: needed much estra time to finish last set

Mon Jul 31 2017 18:32:25 GMT+0800 (China Standard Time)
week 4 day 1 level 2
do 18 pushups 45
rest 60 seconds 194
do 22 pushups 39
rest 60 seconds 312
do 16 pushups 4181
rest 60 seconds 214
do 16 pushups 28
rest 60 seconds 115
do at least 25 pushups 94
Total
5222 seconds
97 / 97 pushups
Interrupted by distraction, long FT call, and couldn't even do the max 25 without breaks. Will try doing again in a few days.

Thu Aug 03 2017 18:54:21 GMT+0800 (China Standard Time)
week 4 day 1 level 2
do 18 pushups 27
rest 60 seconds 63
do 22 pushups 40
rest 60 seconds 63
do 16 pushups 48
rest 60 seconds 66
do 16 pushups 168
rest 60 seconds 64
do at least 25 pushups 231
Total
770 seconds
97 / 97 pushups
(Repeat of same sequence) Crashed in next to last, last one was 4,4,3,4,3,4 with an average of 10 breaths between each. 

Sun Aug 06 2017 17:00:26 GMT+0800 (China Standard Time)
week 3 day 1 level 2
do 12 pushups 25
rest 60 seconds 63
do 17 pushups 30
rest 60 seconds 60
do 13 pushups 27
rest 60 seconds 60
do 13 pushups 40
rest 60 seconds 65
do at least 17 pushups 143
Total
513 seconds
72 / 72 pushups
restarted program, still could not do last set properly, strange! At least took less than 10 min...

Thu Aug 31 2017 16:25:22 GMT+0800 (China Standard Time)
week 3 day 1 level 2
do 12 pushups 23
rest 60 seconds 60
do 17 pushups 38
rest 60 seconds 60
do 13 pushups 38
rest 60 seconds 93
do 13 pushups 83
rest 60 seconds 94
do at least 17 pushups 167
Total
656 seconds
72 / 72 pushups
restarted program, still could not do last two sets properly... 11 min...

  -->
